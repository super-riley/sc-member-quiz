<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠˆí¼ì„¼íŠ¸ ë©¤ë²„ í€´ì¦ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #FF6B9D 0%, #FFA07A 50%, #FFD93D 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 25px;
            box-shadow: 0 25px 70px rgba(255, 107, 157, 0.3);
            max-width: 600px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            text-align: center;
            background: linear-gradient(135deg, #FF6B9D, #FFA07A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            font-size: 36px;
            font-weight: 800;
        }

        .subtitle {
            text-align: center;
            color: #999;
            font-size: 14px;
            margin-bottom: 30px;
        }

        /* ì‹œì‘ í™”ë©´ */
        .start-screen {
            text-align: center;
        }

        .start-title {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .start-date {
            color: #FF6B9D;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 40px;
        }

        .start-info {
            background: #FFF5F7;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 40px;
        }

        .start-info-item {
            font-size: 18px;
            margin: 10px 0;
            color: #333;
        }

        .start-info-item strong {
            color: #FF6B9D;
        }

        .stats {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            padding: 15px;
            background: linear-gradient(135deg, #FFF5F7 0%, #FFF9E6 100%);
            border-radius: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 26px;
            font-weight: 800;
            background: linear-gradient(135deg, #FF6B9D, #FFA07A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #FFE5EC;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF6B9D 0%, #FFA07A 100%);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .photo-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .photo {
            max-width: 300px;
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.3);
            border: 5px solid #FFF;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .option-btn {
            padding: 18px;
            font-size: 17px;
            font-weight: 600;
            border: 3px solid #FFE5EC;
            background: white;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            color: #333;
        }

        .option-btn:hover {
            border-color: #FF6B9D;
            background: #FFF5F7;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255, 107, 157, 0.2);
        }

        .option-btn.selected {
            background: linear-gradient(135deg, #FF6B9D, #FFA07A);
            color: white;
            border-color: #FF6B9D;
        }

        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .buttons {
            display: flex;
            gap: 12px;
        }

        .btn {
            flex: 1;
            padding: 18px;
            font-size: 17px;
            font-weight: 700;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B9D 0%, #FFA07A 100%);
            color: white;
            box-shadow: 0 8px 20px rgba(255, 107, 157, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(255, 107, 157, 0.4);
        }

        .btn-secondary {
            background: #FFD93D;
            color: #333;
            box-shadow: 0 8px 20px rgba(255, 217, 61, 0.3);
        }

        .btn-secondary:hover {
            background: #FFC700;
            transform: translateY(-3px);
        }

        .result-screen {
            text-align: center;
        }

        .result-screen h2 {
            font-size: 36px;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #FF6B9D, #FFA07A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .result-score {
            font-size: 56px;
            font-weight: 800;
            background: linear-gradient(135deg, #FF6B9D, #FFA07A);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
        }

        .result-details {
            background: #FFF5F7;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 2px solid #FFE5EC;
            font-size: 16px;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-label {
            color: #666;
            font-weight: 600;
        }

        .result-value {
            font-weight: 700;
            color: #FF6B9D;
        }

        .result-value.correct {
            color: #4CAF50;
        }

        .result-value.wrong {
            color: #FF6B9D;
        }

        .wrong-list {
            text-align: left;
            background: #FFF5F7;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            max-height: 300px;
            overflow-y: auto;
        }

        .wrong-item {
            padding: 12px;
            border-bottom: 2px solid #FFE5EC;
            font-size: 15px;
        }

        .wrong-item:last-child {
            border-bottom: none;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 28px;
            }

            .start-title {
                font-size: 36px;
            }

            .photo {
                max-width: 250px;
                height: 250px;
            }

            .options {
                grid-template-columns: 1fr;
            }

            .buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì‹œì‘ í™”ë©´ -->
        <div id="startScreen">
            <div class="start-screen">
                <div class="start-title">ğŸ¯</div>
                <h1>ìŠˆí¼ì„¼íŠ¸ ë©¤ë²„ í€´ì¦ˆ</h1>
                
                <p style="font-size: 18px; color: #666; line-height: 1.6; margin-bottom: 35px;">
                    ì–´ëŠë§ <strong>200ëª…ì´ ë„˜ì–´ë²„ë¦° ìŠˆí¼ì„¼íŠ¸</strong><br>
                    ë©¤ë²„ ì´ë¦„ ë§ˆìŠ¤í„°ì— ë„ì „í•˜ì„¸ìš”! ğŸ”¥
                </p>
                
                <div class="start-info">
                    <div class="start-info-item">ğŸ† ë‹¹ì‹ ì˜ ì–¼êµ´ ê¸°ì–µë ¥ì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”!</div>
                    <div class="start-info-item">â“ ë¼ìš´ë“œë‹¹ <strong>15ë¬¸ì œ</strong></div>
                    <div class="start-info-item">ğŸ² ë§¤ë²ˆ <strong>ëœë¤</strong> ì¶œì œ</div>
                </div>

                <button class="btn btn-primary" onclick="startQuiz()" style="width: 100%; font-size: 20px; padding: 20px; margin-bottom: 20px;">
                    í€´ì¦ˆ ì‹œì‘í•˜ê¸° ğŸš€
                </button>
                
                <div style="text-align: right; color: #ccc; font-size: 11px;">
                    ê¸°ì¤€ì¼: 2025/12/09
                </div>
            </div>
        </div>

        <!-- í€´ì¦ˆ í™”ë©´ -->
        <div id="quizScreen" class="hidden">
            <h1>ğŸ¯ ìŠˆí¼ì„¼íŠ¸ ë©¤ë²„ í€´ì¦ˆ</h1>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">ì§„í–‰</div>
                    <div class="stat-value" id="progress">0/15</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>

            <div class="photo-container">
                <img id="photo" class="photo" src="" alt="ë©¤ë²„ ì‚¬ì§„">
            </div>

            <div class="options" id="options">
                <button class="option-btn" onclick="selectAnswer(0)"></button>
                <button class="option-btn" onclick="selectAnswer(1)"></button>
                <button class="option-btn" onclick="selectAnswer(2)"></button>
                <button class="option-btn" onclick="selectAnswer(3)"></button>
            </div>

            <div class="buttons">
                <button class="btn btn-primary" onclick="nextQuestion()" style="width: 100%;">ë‹¤ìŒ ë¬¸ì œ</button>
            </div>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div id="resultScreen" class="result-screen hidden">
            <h2>ğŸ‰ ë¼ìš´ë“œ ì™„ë£Œ!</h2>
            <div class="result-score" id="finalScore">0/15</div>
            
            <div class="result-details">
                <div class="result-item">
                    <span class="result-label">ì •ë‹µ</span>
                    <span class="result-value correct" id="correctResult">0ê°œ</span>
                </div>
                <div class="result-item">
                    <span class="result-label">ì˜¤ë‹µ</span>
                    <span class="result-value wrong" id="wrongResult">0ê°œ</span>
                </div>
                <div class="result-item">
                    <span class="result-label">ì •ë‹µë¥ </span>
                    <span class="result-value" id="percentageResult">0%</span>
                </div>
            </div>

            <div id="wrongListContainer" class="hidden">
                <h3 style="margin-bottom: 15px; color: #FF6B9D;">í‹€ë¦° ë¬¸ì œ ë³µìŠµ</h3>
                <div class="wrong-list" id="wrongList"></div>
            </div>

            <div class="buttons">
                <button class="btn btn-primary" onclick="restartQuiz()">ìƒˆ ë¼ìš´ë“œ ì‹œì‘</button>
                <button class="btn btn-secondary" onclick="goToStart()">ì²˜ìŒìœ¼ë¡œ</button>
            </div>
        </div>
    </div>

    <script>
        // ëª¨ë“  ë©¤ë²„ ëª©ë¡ (204ëª…)
        const allMembers = [
            "êµ¬í”¼", "ê·¸ë£¨íŠ¸", "ê·¸ë¦°", "ê¸€ë¡œ", "ë‚˜ë¯¸", "ë„¤ì´ì„ ", "ë„¤ì´íŠ¸", "ë…¸ë¼", "ë…¸ë°”", "ë…¸ì´",
            "ë‹¤ìš°ë‹ˆ", "ë‹¤ì´ê³ ", "ë‹¤ì¦ˆ", "ë‹¨í…Œ", "ë‹¹ê³ ", "ë•êµ¬", "ë˜ì»¨", "ë°ë¹ˆ", "ë””ë‰´", "ë””ì˜¤",
            "ë¼ë‹ˆ", "ë¼ìŠ¤", "ë¼ì¼ë¦¬", "ë¼íŒŒ", "ëŸ¬ë¯¸", "ëŸ¼ë¸”", "ë ˆë‚˜", "ë ˆëª¬", "ë ˆë¯¸", "ë ˆì˜¤",
            "ë ˆì´", "ë ˆì¸", "ë¡œê±´", "ë¡œë ŒìŠ¤", "ë¡œì™„", "ë¡œì§€", "ë¡ ", "ë£¨ë‚˜", "ë£¨ë£¨", "ë£¨ë¯¸",
            "ë£¨ë¹„", "ë£¨ì‹œì˜¤", "ë£¨ì´ìŠ¤", "ë£¨ì¹´", "ë¦¬ë§ˆ", "ë¦¬ì•„", "ë¦¬ì•”", "ë¦¬ì¦ˆ", "ë§ˆë£¨", "ë§ˆë¦¬",
            "ë§ˆë¦°", "ë§ˆì´í¬", "ë§¤ë””", "ë§¤íŠœ", "ë©”ì´", "ë©œë¡ ", "ëª¨ê±´", "ëª¨ì„¸ìŠ¤", "ëª¨ì¹´", "ëª°ë¦¬",
            "ë¬´ë¬´", "ë¯¸ë‹ˆ", "ë¯¸ë¡œ", "ë¯¸ì•„", "ë¯¸ì•¼", "ë¯¼ë””", "ë¯¼ì¦ˆ", "ë°€ë¼", "ë°”ë„¬", "ë°”ë‹ë¼",
            "ë°”ìš¸", "ë°¤ë¹„", "ë°±ë¹„", "ë²„ìŠ¤", "ë² ë£¨", "ë²¤", "ë³´ë¦¬", "ë¸Œë¼ìš´", "ë¸Œë£©", "ë¸Œë¦¬",
            "ë¸”ë£¨", "ë¹„ë‚˜", "ë¹„ë‹ˆ", "ë¹„ëª¨", "ë¹„ë¹„", "ë¹„íƒ€", "ë¹„íˆ", "ë¹ˆì„¼íŠ¸", "ì‚°ì´ˆ", "ìƒë¦¬",
            "ìƒ˜", "ì†Œë‚™", "ì†Œë‹‰", "ì†Œí”¼", "ì†Œí”¼ì•„", "ì†”", "ìˆ˜ì”", "ìŠˆìŠˆ", "ìŠ¤ë…¸ìš°", "ìŠ¤íƒ€ì›Œì»¤",
            "ìŠ¤íƒ ", "ìŠ¤í…”ë¼", "ìŠ¤í†¤", "ìŠ¤í‹°ë¸Œ", "ì‹œëª¬", "ì‹œì‹œ", "ì‹ ë””", "ì‹¤ë²„", "ì¨ë¨¸", "ì•„ë¡ ",
            "ì•„ë¦¬", "ì•„ìŠ¤ì¹´", "ì•„ì´ë£¨", "ì•Œë ‰ìŠ¤", "ì•Œí”¼", "ì• ì‰¬", "ì•¨ëŸ°", "ì•¨ë¹ˆ", "ì—ë“œì›Œë“œ", "ì—ë“œìœˆ",
            "ì—ìŠ¤ì¹´", "ì„¸ì˜", "ì—˜ë¼ì´", "ì—˜ë¦°", "ì—˜ë¨¸", "ì— ë²„", "ì˜¤ë¥˜", "ì˜¤ì›¬", "ì˜¬ë¦¬", "ìš”ë‹¤",
            "ìœŒë¦¬", "ìœ ë‹ˆ", "ì´ë”", "ì´ë“ ", "ì´ì•ˆ", "ì¬ë‹ˆ", "ì¬íŒŒí¬", "ì €ë‹ˆ", "ì œì´", "ì œë“œ",
            "ì œë ˆë¯¸", "ì œì´ë“œ", "ì œì´ë¯¸", "ì œì´ìŠˆ", "ì œì´ìŠ¤", "ì œì´ìŠ¨", "ì œì´ì½¥", "ì œì´í¬", "ì œì„ìŠ¤", "ì¡°ë…¸",
            "ì¡°ë‹ˆ", "ì¡°ì…‰", "ì¡°ì›°", "ì£¼ë“œ", "ì¤„ë¦¬", "ì§€ë…¸", "ì§€ë‹ˆ", "ì§€ì§€", "ì§„ì €", "ì°¬ìŠ¤",
            "ì²´ë¦¬", "ì´ˆíŒŒ", "ì¹´ë¡œ", "ì¹´ì¼", "ì¹¼ìŠ¨", "ìºì‹œ", "ìºì‹œì¹´ìŠ¤", "ìº£ë‹ˆìŠ¤", "ì¼€ë¹ˆ", "ì¼€ì´ë“ ",
            "ì¼„ì‹ ", "ì½”ë‹ˆ", "ì½”ì½”", "ì½œë“œ", "ì¿ í¼", "ì¿¼ì¸ ", "í¬ë¡œìŠ¤", "í¬ë¦¬ìŠ¤", "í¬ë¦¬ì‹œ", "í‚¤ë¼",
            "íƒ€ë¹„", "íƒ€ì´ë“œ", "í…Œë””", "í…Œë¦¬", "í† ë“œ", "í† ë¦¬", "í† íŠ¸", "í‹°ìƒ¤", "íŒ½", "í˜í¼",
            "í¬ë¦¬", "í¬í”¼", "í‘¸ë¦¬í‹°", "í”„ë ˆì†Œ", "í”Œë¼ì›Œ", "í”¼ë¹„", "í•˜ë£¨", "í•˜í¼", "í•œë‚˜", "í—¤ë‹ˆ",
            "í—ˆìˆ˜", "í—¤ì´ì¦ˆ", "í—¤ì¼ë¦¬", "í—¨ë„", "í™˜íƒ€", "í›„í‚¤", "íœ´ì¦ˆ", "íˆë‹ˆ"
        ];

        const QUESTIONS_PER_ROUND = 15;
        
        // í—·ê°ˆë¦¬ëŠ” ë‹‰ë„¤ì„ ê·¸ë£¹ (ë¹„ìŠ·í•œ ì´ë¦„ë“¤ë¼ë¦¬)
        const similarNames = [
            ["ì œì´", "ì œì´ìŠ¤", "ì œì´ìŠ¨", "ì œì´í¬", "ì œì´ì½¥", "ì œì´ë¯¸", "ì œì´ë“œ", "ì œì´ìŠˆ", "ì œì„ìŠ¤"],
            ["ë£¨ë‚˜", "ë£¨ë£¨", "ë£¨ë¯¸", "ë£¨ë¹„", "ë£¨ì¹´", "ë£¨ì´ìŠ¤", "ë£¨ì‹œì˜¤"],
            ["ë ˆë‚˜", "ë ˆëª¬", "ë ˆë¯¸", "ë ˆì˜¤", "ë ˆì´", "ë ˆì¸"],
            ["ë¡œê±´", "ë¡œë ŒìŠ¤", "ë¡œì™„", "ë¡œì§€", "ë¡ "],
            ["ë§ˆë£¨", "ë§ˆë¦¬", "ë§ˆë¦°", "ë§ˆì´í¬"],
            ["ë…¸ë¼", "ë…¸ë°”", "ë…¸ì´"],
            ["ë¦¬ì•„", "ë¦¬ì•”", "ë¦¬ì¦ˆ", "ë¦¬ë§ˆ"],
            ["ë¹„ë‚˜", "ë¹„ë‹ˆ", "ë¹„ëª¨", "ë¹„ë¹„", "ë¹„íƒ€", "ë¹„íˆ", "ë¹ˆì„¼íŠ¸"],
            ["ì†Œí”¼", "ì†Œí”¼ì•„", "ì†Œë‹‰", "ì†Œë‚™"],
            ["ì—˜ë¼ì´", "ì—˜ë¦°", "ì—˜ë¨¸"],
            ["ìºì‹œ", "ìºì‹œì¹´ìŠ¤", "ìº£ë‹ˆìŠ¤"],
            ["í¬ë¡œìŠ¤", "í¬ë¦¬ìŠ¤", "í¬ë¦¬ì‹œ"],
            ["ì½”ë‹ˆ", "ì½”ì½”"],
            ["í…Œë””", "í…Œë¦¬"],
            ["í† ë“œ", "í† ë¦¬", "í† íŠ¸"],
            ["ìŠ¤íƒ ", "ìŠ¤í…”ë¼", "ìŠ¤í†¤", "ìŠ¤í‹°ë¸Œ"],
            ["ë˜ì»¨", "ë•êµ¬"],
            ["ë°¤ë¹„", "ë°±ë¹„"],
            ["ë³´ë¦¬", "ë¸Œë¦¬"],
            ["ì•„ë¡ ", "ì•„ë¦¬"],
            ["ì•¨ëŸ°", "ì•¨ë¹ˆ"],
            ["ì—ë“œì›Œë“œ", "ì—ë“œìœˆ"],
            ["ì¡°ë…¸", "ì¡°ë‹ˆ", "ì¡°ì…‰", "ì¡°ì—˜"],
            ["ì§€ë…¸", "ì§€ë‹ˆ", "ì§€ì§€"],
            ["í¬ë¦¬", "í¬í”¼"],
            ["í•˜ë£¨", "í•˜í¼", "í•œë‚˜"],
            ["ë¯¼ë””", "ë¯¼ì¦ˆ", "ë°€ë¼"],
            ["ì¼€ë¹ˆ", "ì¼€ì´ë“ ", "ì¼„ì‹ "],
            ["íƒ€ë¹„", "íƒ€ì´ë“œ"],
            ["í—¤ì´ì¦ˆ", "í—¤ì¼ë¦¬", "í•´ë‹ˆ", "í—¨ë„"],
            ["í™˜íƒ€", "í›„í‚¤", "íœ´ì¦ˆ", "íˆë‹ˆ"]
        ];
        
        let currentMembers = [];
        let currentIndex = 0;
        let userAnswers = [];
        let currentAnswer = "";
        let selectedIndex = -1;

        // í€´ì¦ˆ ì‹œì‘
        function startQuiz() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            initRound();
        }

        // ë¼ìš´ë“œ ì´ˆê¸°í™”
        function initRound() {
            // 204ëª… ì¤‘ ëœë¤ 15ëª… ì„ íƒ
            const shuffled = [...allMembers];
            shuffleArray(shuffled);
            currentMembers = shuffled.slice(0, QUESTIONS_PER_ROUND);
            
            currentIndex = 0;
            userAnswers = [];
            
            loadQuestion();
        }

        // ë°°ì—´ ì„ê¸°
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // ë¬¸ì œ ë¡œë“œ
        function loadQuestion() {
            if (currentIndex >= currentMembers.length) {
                showResult();
                return;
            }

            // ì„ íƒ ì´ˆê¸°í™”
            selectedIndex = -1;
            currentAnswer = currentMembers[currentIndex];
            
            // ì‚¬ì§„ ë¡œë“œ ì•ˆì •ì„± ê°•í™”
            const photoElement = document.getElementById('photo');
            const newSrc = `photos/${currentAnswer}.jpg`;
            
            // ë¡œë”© íƒ€ì„ì•„ì›ƒ ì„¤ì • (3ì´ˆ)
            let loadTimeout;
            let isLoaded = false;
            
            // ì´ì „ ì´ë¯¸ì§€ ì´ˆê¸°í™”
            photoElement.style.opacity = '0.3';
            photoElement.src = '';
            
            // ìƒˆ ì´ë¯¸ì§€ ë¡œë“œ
            const img = new Image();
            
            img.onload = function() {
                if (!isLoaded) {
                    isLoaded = true;
                    clearTimeout(loadTimeout);
                    photoElement.src = img.src;
                    photoElement.style.opacity = '1';
                    generateAndShowOptions();
                }
            };
            
            img.onerror = function() {
                if (!isLoaded) {
                    isLoaded = true;
                    clearTimeout(loadTimeout);
                    console.error('ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', currentAnswer);
                    // ì¬ì‹œë„
                    photoElement.src = newSrc + '?retry=' + Date.now();
                    photoElement.style.opacity = '1';
                    generateAndShowOptions();
                }
            };
            
            // íƒ€ì„ì•„ì›ƒ ì„¤ì • (3ì´ˆ í›„ ê°•ì œ ì§„í–‰)
            loadTimeout = setTimeout(function() {
                if (!isLoaded) {
                    isLoaded = true;
                    photoElement.src = newSrc;
                    photoElement.style.opacity = '1';
                    generateAndShowOptions();
                }
            }, 3000);
            
            // ì´ë¯¸ì§€ ë¡œë“œ ì‹œì‘
            img.src = newSrc;

            // í†µê³„ ì—…ë°ì´íŠ¸
            updateStats();
        }
        
        // ë³´ê¸° ìƒì„± ë° í‘œì‹œ
        function generateAndShowOptions() {
            const options = generateOptions(currentAnswer);
            const optionButtons = document.querySelectorAll('.option-btn');
            
            optionButtons.forEach((btn, idx) => {
                btn.textContent = options[idx];
                btn.className = 'option-btn';
                btn.disabled = false;
            });
        }

        // ë³´ê¸° ìƒì„± - ë‚œì´ë„ ìƒìŠ¹: ì´ˆì„±/ê¸€ì ìœ ì‚¬ë„ ìš°ì„ 
        function generateOptions(answer) {
            const options = [answer];
            
            // 1ë‹¨ê³„: ê°™ì€ ê·¸ë£¹ ì´ë¦„ë“¤ (ê°€ì¥ í—·ê°ˆë¦¼)
            let similarGroup = [];
            for (const group of similarNames) {
                if (group.includes(answer)) {
                    similarGroup = group.filter(name => name !== answer);
                    break;
                }
            }
            
            // 2ë‹¨ê³„: ì´ˆì„±ì´ ê°™ì€ ì´ë¦„ë“¤
            const firstChar = answer[0];
            const sameInitial = allMembers.filter(m => 
                m !== answer && 
                m[0] === firstChar && 
                !similarGroup.includes(m)
            );
            
            // 3ë‹¨ê³„: ê¸€ìê°€ ê²¹ì¹˜ëŠ” ì´ë¦„ë“¤
            const sharedChars = allMembers.filter(m => {
                if (m === answer || similarGroup.includes(m) || sameInitial.includes(m)) return false;
                // í•œ ê¸€ìë¼ë„ ê²¹ì¹˜ë©´
                for (let char of answer) {
                    if (m.includes(char)) return true;
                }
                return false;
            });
            
            // ìš°ì„ ìˆœìœ„ëŒ€ë¡œ ë³´ê¸° ì±„ìš°ê¸°
            const candidates = [...similarGroup, ...sameInitial, ...sharedChars];
            
            // 80% í™•ë¥ ë¡œ í—·ê°ˆë¦¬ëŠ” ì´ë¦„ 3ê°œ ëª¨ë‘ í¬í•¨
            if (candidates.length >= 3 && Math.random() > 0.2) {
                shuffleArray(candidates);
                options.push(...candidates.slice(0, 3));
            } 
            // 20% í™•ë¥ ë¡œ í—·ê°ˆë¦¬ëŠ” ì´ë¦„ 2ê°œ + ëœë¤ 1ê°œ
            else if (candidates.length >= 2) {
                shuffleArray(candidates);
                options.push(...candidates.slice(0, 2));
                
                // ë‚˜ë¨¸ì§€ ëœë¤
                const otherMembers = allMembers.filter(m => 
                    !options.includes(m) && 
                    !candidates.includes(m)
                );
                if (otherMembers.length > 0) {
                    options.push(otherMembers[Math.floor(Math.random() * otherMembers.length)]);
                }
            }
            
            // ì˜µì…˜ì´ ë¶€ì¡±í•˜ë©´ ì¶”ê°€
            while (options.length < 4) {
                const otherMembers = allMembers.filter(m => !options.includes(m));
                if (otherMembers.length === 0) break;
                
                // ë‚¨ì€ í›„ë³´ ì¤‘ì—ì„œ ì„ íƒ
                if (candidates.length > options.length - 1) {
                    const next = candidates.find(c => !options.includes(c));
                    if (next) {
                        options.push(next);
                        continue;
                    }
                }
                
                // ê·¸ë˜ë„ ì—†ìœ¼ë©´ ëœë¤
                const random = otherMembers[Math.floor(Math.random() * otherMembers.length)];
                options.push(random);
            }
            
            shuffleArray(options);
            return options;
        }

        // ë‹µ ì„ íƒ
        function selectAnswer(index) {
            selectedIndex = index;
            const optionButtons = document.querySelectorAll('.option-btn');
            
            // ëª¨ë“  ë²„íŠ¼ì—ì„œ ì„ íƒ í•´ì œ í›„ ì„ íƒëœ ë²„íŠ¼ë§Œ í‘œì‹œ
            optionButtons.forEach((btn, idx) => {
                if (idx === index) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });
        }

        // ë‹¤ìŒ ë¬¸ì œ
        function nextQuestion() {
            if (selectedIndex === -1) {
                alert('ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }
            
            // ë‹µì•ˆ ì €ì¥
            const optionButtons = document.querySelectorAll('.option-btn');
            const selected = optionButtons[selectedIndex].textContent;
            userAnswers.push({
                question: currentAnswer,
                selected: selected,
                correct: currentAnswer
            });
            
            currentIndex++;
            loadQuestion();
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('progress').textContent = `${currentIndex + 1}/${QUESTIONS_PER_ROUND}`;
            
            const progress = ((currentIndex + 1) / QUESTIONS_PER_ROUND) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // ê²°ê³¼ í‘œì‹œ
        function showResult() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            
            // ì •ë‹µ ê°œìˆ˜ ê³„ì‚°
            const correctCount = userAnswers.filter(a => a.selected === a.correct).length;
            const wrongCount = QUESTIONS_PER_ROUND - correctCount;
            const percentage = ((correctCount / QUESTIONS_PER_ROUND) * 100).toFixed(1);
            
            document.getElementById('finalScore').textContent = `${correctCount}/${QUESTIONS_PER_ROUND}`;
            document.getElementById('correctResult').textContent = `${correctCount}ê°œ`;
            document.getElementById('wrongResult').textContent = `${wrongCount}ê°œ`;
            document.getElementById('percentageResult').textContent = `${percentage}%`;
            
            // í‹€ë¦° ë¬¸ì œ í‘œì‹œ
            const wrongAnswers = userAnswers.filter(a => a.selected !== a.correct);
            if (wrongAnswers.length > 0) {
                document.getElementById('wrongListContainer').classList.remove('hidden');
                const wrongList = document.getElementById('wrongList');
                wrongList.innerHTML = wrongAnswers.map((item, idx) => 
                    `<div class="wrong-item">
                        ${idx + 1}. <strong>${item.question}</strong><br>
                        ì„ íƒ: ${item.selected} â†’ 
                        <span style="color: #4CAF50; font-weight: 700;">ì •ë‹µ: ${item.correct}</span>
                    </div>`
                ).join('');
            } else {
                document.getElementById('wrongListContainer').classList.add('hidden');
            }
        }

        // ìƒˆ ë¼ìš´ë“œ ì‹œì‘
        function restartQuiz() {
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            initRound();
        }

        // ì²˜ìŒìœ¼ë¡œ
        function goToStart() {
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }
    </script>
</body>
</html>
